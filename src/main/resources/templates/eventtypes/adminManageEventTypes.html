<#import "/main_layout.html" as layout />

<@layout.stdpage "Manage Event Types" "eventTypeManager.css" "eventTypes.js">

<div id="mainContainer" class="container">
	
	<!-- Page instructions -->
	<div class="row" style="padding-left: 20px; padding-bottom: 20px">
		<div class="col-md" id="instructions">
			<p>Please select the action you would like to take.</p>
		</div>
	</div>
	
	<!-- table title. -->
	<div class="row" style="padding-left: 20px; padding-bottom: 20px">
		<div class="col">
			<h2>Event Types</h2>
		</div>
	</div>
	
	<!-- Add/Create new event type button -->
	<div class="row" style="padding-left: 20px; padding-bottom: 20px">
		<div class="col">
			<button id="btnEvNew" class="btn btn-md addBtn">
				<span class="fas fa-plus-circle"></span> Create New
			</button>
		</div>
	</div>
	
	<div class="row" style="padding-left: 20px; padding-bottom: 20px">
		<div class="col">

		<!-- Event Types table -->
			<table id="tblEvType" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
				<thead>
					<tr>
						<th class="th-sm">ID</th>
						<th class="th-sm">(Name) Description</th>
						<th class="th-sm">Default Hours</th>
						<th class="th-sm">Default Service Client</th>
						<th class="th-sm">Action</th>
					</tr>
				</thead>
				<tbody id="etTblBody">
					<#if evTypes??>
					<#list evTypes as et>
					<tr id="etid-${et.etid?c}">
						<td class="et_id etView" etid="${et.etid?c}">${et.etid!"UNKNOWN ID"}</td>
						<td class="et_name_descr etView" etid="${et.etid?c}">(${et.name!"UNKNOWN NAME"}) ${et.description!"UNKNOWN DESCRIPTION"}</td>
						<td class="et_hr etView" etid="${et.etid?c}">${et.defHours!"0"}</td>
						<#if et.defClient??>
							<td class="et_sc etView" etid="${et.etid?c}">${et.defClient.name}</td>
						<#else>
							<td class="et_sc evView" eid="${et.etid?c}">No Service Client</td>
						</#if>
						
						<!--action buttons-->
						<td class="etActions">
							<button class="btn edit btnEtEdit" etid="${et.etid?c}">
								<i class="fas fa-pencil-alt"></i>
							</button>
							<button class="btn btnView btnEtView" etid="${et.etid?c}">
								<i class="fas fa-search"></i>
							</button>
							<button class="btn del btnEtDel" etid="${et.etid?c}">
								<i class="far fa-trash-alt"></i>
							</button>
						</td>
					</tr>
					</#list>
					</#if>
				</tbody>
				<tfoot>
				</tfoot>
			</table>
		</div>
	</div>

	<!-- back button -->
	<div class="row" style="padding-left: 20px; padding-bottom: 20px">
		<button onclick="goBack()" class="btn edit">
			<span class="fas fa-arrow-left"></span> Back
		</button>
	</div>
	
</div>

<div id="dlgScSel" title="Select Default Service Client..." style="display:none">
	<div class="row" style="padding-left: 20px; padding-bottom: 20px">
		<input type="hidden" id="newScId" value="" />
		<div class="col">
			<!-- Service Client table -->
			<table id="tblSrvClients" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
				<thead>
					<tr>
						<th>&#xA0;</th>
						<th>ID</th>
						<th>Name</th>
					</tr>
				</thead>
				<tbody>
					<#list clients as sc>
					<tr id="scid-${sc.scid?c}">
						<td class="sc_sel"><input class="boxSel" type="checkbox" scid="${sc.scid}" /></td>
						<td class="sc_id">${sc.scid!"UNKNOWN ID"}</td>
						<td class="sc_name text-left" style="padding-left:15px">${sc.name!"UNKNOWN NAME"}</td>
					</tr>
					</#list>
				</tbody>
			</table>
		</div>
	</div>
</div>

<div id="addDlg" title="Add Event Type" class="ui-widget">
	<div class="container-fluid">
		<p class="validationTips"></p>
		<form id="newEt">
			<div class="row">
				<div class="col-sm-4">
					<div class="form-group">
						<label for="etName">Abbreviated Name:</label>
						<input id="etName" type="text" class="form-control"/>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm">
					<div class="form-group">
						<label for="etDescr">Full Name/Description:</label>
						<textarea id="etDescr" rows="2" class="form-control"></textarea>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3">
					<div class="form-group">
						<label for="defHrs">Default Hours:</label>
						<input id="defHrs" type="text" class="form-control"/>
					</div>
				</div>
				<div class="col-sm-2"></div>
				<div class="col-sm">
					<div class="row" style="padding-bottom:0px">
						<div class="form-group">
							<label for="radio-inline" style="padding-right:10px">Do you wish to pin hours?</label>
							<label class="radio-inline" style="padding-right:10px">
      							<input id="yesPinHrs" type="radio" name="optradio" checked> Yes
    						</label>
				    		<label class="radio-inline" style="padding-right:10px">
      							<input id="noPinHrs" type="radio" name="optradio"> No
    						</label>
						</div>
					</div>
					<div class="row" style="padding-top:-0px">
						<p style="font-size:12px">*By pinning hours, a user must report using the default hours.</p>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm">
					<div class="form-group">
						<label for="etSc">Service Client:</label>
						<input type="hidden" id="scId" value="" />
						<input id="etSc" type="text" class="form-control" readonly="readonly" value="sel sc"/>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>
<script src="/srv/js/datatables.min.js"></script>
<link rel="stylesheet" href="/srv/css_style/datatables.min.css" />

</@layout.stdpage>