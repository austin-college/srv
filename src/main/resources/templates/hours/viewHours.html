<#import "/main_layout.html" as layout />

<@layout.stdpage "Hours Served" "hoursStyle.css" "hours/servantHrsList.js">

<div>
	<div class="row" style="padding-left: 30px; padding-bottom: 30px">
			<!--  this container holds onto all information regarding Stats
		and has the button as well located at the bottom -->
			<div>
				<div>
				<!-- TODO To be replaced with live servant Name -->
					<h1>Welcome, ${userid!"UNKNOWN"}</h1>
					<h2>Service Stats</h2>
				</div>
				

						<!-- container thats creating a table that will hold our data-->
						<div class="container ui-widget">
							<div Id="table" class="row">
								<table
									class="table table-striped ui-widget ui-widget-content table-bordered table-hover">
									<thead>
										<tr class="ui-widget-header">
											<th>Hours Served This Semester</th>
											<th class="wtTh">${semTot!"UNKNOWN"}</th>
											<th>Hours Served This Term</th>
											<th class="wtTh">${termTot!"UNKNOWN"}</th>
											<th>Organizations Helped</th>
											<th class="wtTh">${totOrgs!"UNKNOWN"}</th>
											<th>Average Hours Served per Month</th>
											<th class="wtTh">${avgPerMo!"UNKNOWN"}</th>
										</tr>

									</thead>
								</table>
							</div>
						</div>

					
			<!-- Button that prompts the user to enter their service hours -->
			<button type="button" class="btn btn-md btn-dark addBtn"
			>
				<span class="fas fa-plus-circle"></span>Add Hours
			</button>

	<div class="row" style="padding-left: 30px; padding-bottom: 20px">
		<!-- BIG credit to Lydia for the most of the elements in this table, and for making the style -->
		<!-- a container for the table container
			will be used for background colors eventually  -->
		<div class="container-tableBackground">
			<div>
				<h1>Service Hours</h1>
			</div>
			<!-- container thats creating a table that will hold our data-->
			<div class="container ui-widget table-responsive">
				<div Id="table" class="row">
					<table id="hrs_tbl"
						class="table table-striped ui-widget ui-widget-content table-bordered table-hover">
						<thead>
							<tr class="ui-widget-header">
								<th>ID</th>
								<th>Service Event</th>
								<th>Hours Served</th>
								<th>Status</th>
								<th colspan='2'>Edit/Delete</th>
							</tr>
						</thead>
						<tbody id="hrs_tbl_body">
							<#if hours??>
								<#list hours as hrs>
									<tr id="row${hrs.shid?c}">
									<td class='hrRow' onRowClick="${hrs.shid?c}" name='hrs_id'>${hrs.shid!"UNKOWN"}</td>
									<td class='hrRow' onRowClick="${hrs.shid?c}" name='hrs_eventName'>${hrs.event.title!"UNKNOWN"}</td>
									<td class='hrRow' onRowClick="${hrs.shid?c}" name='hrs_hrsServed'>${hrs.hours!"UNKNOWN"}</td>
									<td class='hrRow' onRowClick="${hrs.shid?c}" name='hrs_status'>${hrs.status!"UNKNOWN"}</td>
									<td>
										<!-- Buttons to open edit/delete hours dialog  -->
										<button type="button" class="edit btn" onEditClick="${hrs.shid?c}">
											<span class="fas fa-pencil-alt"></span> 
						  					Edit
										</button>
									</td>
									<td>
				   						 <button type="button" class="del btn" onDelClick="${hrs.shid?c}">
											<span class="fas fa-trash-alt"></span>  
						  					Delete 
										</button>
									</td>
								</tr>
							</#list>
							</#if>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- The div below defines the delete dialog for deleting a served hour which is hidden by JS and exposed by JQ. -->
<div id="delDlg" title="DELETE SELECTED HOURS" class="ui-widget delWid">
	<p id="del_confirm">
		<br>
		<br> <span id="delMsg1"></span> <br>
		<br> <span id="delMsg2"></span>
	</p>
</div>

<!--  The div below shows a modal view of the service hour information (contact, date, etc) when the row was selected -->
<div id="hrInfoDlg" title="Service Hour Information" class="ui-widget delWid">
	<div class="container">
		<div class="row">
			<div class='form-group'>
				<div class='form-row'>
					<h5><b>Event Information</b></h5>
				</div>
				<div class='form-row'>
					<hr class='col'>
				</div>
				<div class="container-fluid">	
					<div class="row">
						<div class='col'>
							<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
							<div class="row-sm">
								<div class="col">
									<label for="hrInfoDlg_eventName" ><b>Name of Event:</b></label>
								</div>
							</div>
							<div class="row-sm">
								<div class="col">
									<input type="text" id="hrInfoDlg_eventName" value=${eventName! "UNKNOWN"} readonly size = 25>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class='col'>
							<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
							<div class="row-sm">
								<div class="col">
									<label for="hrInfoDlg_date"><b>Date (mm/dd/yy):</b></label>
								</div>
							</div>
							<div class="row-sm">
								<div class="col">
									<input type='text' id="hrInfoDlg_date" value="03/12/20" readonly size='8'>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class='col'>
							<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
							<div class="row-sm">
								<div class="col">
									<label for="hrInfoDlg_org"><b>Organization:</b></label> 
								</div>
							</div>
							<div class="row-sm">
								<div class="col">
									<input type='text' id='hrInfoDlg_org' value="Meals on Wheels" } readonly size='30'>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class='col'>
							<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
							<div class="row-sm">
								<div class="col">
									<label for='hrInfoDlg_hrsServed'><b>Hours Served:</b></label> 
								</div>
							</div>
							<div class="row-sm">
								<div class="col">
									<input type='text' id="hrInfoDlg_hrsServed" value=${hrsServed! "UNKNOWN"} readonly size='2'>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class='col'>
							<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
							<div class="row-sm">
								<div class="col">
									<label for="hrInfoDlg_desc"><b>Description of Event:</b></label>
								</div>
							</div>
							<div class="row-sm">
								<div class="col">
									<input type='text' id="hrInfoDlg_desc" value="Did miscellaneous tasks." readonly size='80'>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class='row'>
					<div class='col'>
						<h5>
							<b>Address Information</b>
						</h5>
						<hr class=".col-md-11-auto">
					</div>
				</div>
				<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
				<div class="container-fluid">	
					<div class="form-row">
						<div class='col'>
						
							<div class="row">
								<div class='col'>
									<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
									<div class="row-sm">
										<div class="col-sm">
											<input id="hrInfoDlg_address" type="text" class="form-control" value="118 Main Street" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class='col'>
									<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
									<div class="row-sm">
										<div class="col-sm">
											<input id="hrInfoDlg_city" type="text" class="form-control" value="Sherman" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class='col'>
									<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
									<div class="row-sm">
										<div class="col-sm">
											<input id="hrInfoDlg_zip" type="text" class="form-control" value="75090" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class='col'>
									<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
									<div class="row-sm">
										<div class="col-sm">
											<input id="hrInfoDlg_state" type="text" class="form-control" value="TX" readonly>
										</div>
									</div>
								</div>
							</div>
						</div>
		  			</div>
	  			</div>
				<div class='row'>
					<div class='col'>
						<h5>
							<b>Contact Information</b>
						</h5>
						<hr class=".col-md-11-auto">
					</div>
				</div>
				<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
				<div class='form-row'>
					<div class='col'>
						<div class="row">
							<div class='col'>
								<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
								<div class="row-sm">
									<div class="col">
										<label for="hrInfoDlg_contactName"><b>Name:</b></label>
									</div>
								</div>
								<div class="row-sm">
									<div class="col">
										<input type="text" id="hrInfoDlg_contactName" value="Joe Smith" readonly>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class='col'>
								<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
								<div class="row-sm">
									<div class="col">
										<label for="hrInfoDlg_contactNumber"><b> Phone Number:</b></label> 
									</div>
								</div>
								<div class="row-sm">
									<div class="col">
										<input type="text" id="hrInfoDlg_contactNumber" value="903-331-1241" readonly size='15'>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class='col'>
								<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
								<div class="row-sm">
									<div class="col">
										<label for="hrInfoDlg_contactEmail"><b> Email:</b></label> 
									</div>
								</div>
								<div class="row-sm">
									<div class="col">
										<input type="text" id="hrInfoDlg_contactEmail" value="randomEmail@gmail.com" readonly>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!--  The div below defines the edit dialog for updating a served hour which is hidden by JS and exposed by JQ. -->
<div id="editDlg" title="Edit Service Hour" class="ui-widget">
	<div class="container">
		<div class="row">
			<div class='form-group'>

				<div class='row'>
					<div class='col'>
						<h5>
							<b>Event Information</b>
						</h5>
						<hr class=".col-md-11-auto">
					</div>
				</div>
				<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_eventName"><b>Name of Event:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type="text" id="editDlg_eventName" value=${eventName!"UNKNOWN"}  size="30">
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_date"><b>Date of Event (mm/dd/yy):</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type='text' id="editDlg_date" value=${date!"03/12/20"}  size='10'>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
								<div class="col">
									<label for="editDlg_org"><b>Organization:</b></label> 
								</div>
							</div>
							<div class="row-sm">
								<div class="col">
									<input type='text' id='editDlg_org' value=${org!"Meals_on_Wheels"}  size='30'>
								</div>
							</div>
					</div>
				</div>
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for='editDlg_hrsServed'><b>Hours Served:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type='text' id="editDlg_hrsServed" value=${hrsServed!"UNKNOWN"}  size='10'>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_desc"><b>Description of Event:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type='text' id="editDlg_desc" value=${desc!"Did_miscellaneous_tasks."} size='80'>
							</div>
						</div>
					</div>
				</div>
				<div class='row'>
					<div class='col'>
						<h5>
							<b>Address Information</b>
						</h5>
						<hr class=".col-md-11-auto">
					</div>
				</div>
				<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_address"><b>Address:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type="text" id="editDlg_address" value=${address! "118 Main
									Street"} size='15'>	
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_city"><b>City:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type="text"
									id="editDlg_city" " value=${city! "Sherman"} size='15'>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_zip"><b>Zip Code:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input
									type="text" id="editDlg_zip" value=${zip! "75090"} size='5'>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_state"><b>State:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input
									type="text" id="editDlg_state" value=${state! "TX"} size='5'>
							</div>
						</div>
					</div>
				</div>
				<div class='row'>
					<div class='col'>
						<h5>
							<b>Contact Information</b>
						</h5>
						<hr class=".col-md-11-auto">
					</div>
				</div>
				<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_contactName"><b>Contact's Name:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type="text" id="editDlg_contactName" value=${conName!"Joe_Smith"}>
							</div>
						</div>
					</div>
				</div>		
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_contactNumber"><b>Contact's Phone
									Number:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type="text" id="editDlg_contactNumber"
									" value=${conNumber! "903-331-1241"} size='15'>
							</div>
						</div>
					</div>
				</div>	
				<div class="row">
					<div class='col'>
						<!--  FOLLOWING IS HARD CODED IN FOR NOW -->
						<div class="row-sm">
							<div class="col">
								<label for="editDlg_contactEmail"><b>Contact's Email:</b></label>
							</div>
						</div>
						<div class="row-sm">
							<div class="col">
								<input type="text" id="editDlg_contactEmail" value=${conEmail!
									"randomEmail@gmail.com"}>
							</div>
						</div>
					</div>
				</div>			

			</div>
		</div>
	</div>
</div>


<div id="etDlg" title="Select Event Type" class="ui-widget">
		<select class="form-control">
			<#list events as e>
			<option value="${e.eid}">${e.title!"UNKNOWN"}</option>
			</#list>
		</select>
</div>


<div id="addDlg" title="Add Service Hour"
		class="ui-widget delWid">
		<p>HOWDY</p>
		
<div class="container-fluid">
	<div class="row">
		<div class="col-lg-4">
			<form action="/srv/viewHours.html">
			
				<input type="hidden" id="newEvId" value="" />
				
				<div class="form-group">
					<label for="name">Name of Event: </label><br> 
					<input id="txtEvTitle" type="text" class="form-control" value="change me" readonly /><br>
					<label for="date">Date of Event: </label><br> <input
						type="date" class="form-control" id="date" value="03/05/2020" readonly /><br>
					<label for="organization">Organization: </label><br> <select
						class="form-control" id="organization"><br>
						<option>Habitat For Humanity</option>
						<option>Meals On Wheels</option>
						<option>Other</option>
					</select><br> <label for="hours">Hours Served: </label><br> <input
						type="text" class="form-control" value="3.5" readonly><br>

				</div>
		</div>
		<div class="col-lg-4">
			<div class="form-group">
				<label for="location">Address: </label><br> <input type="text"
					class="form-control" value="1235 Left Ln" readonly><br> <label
					for="zip">Zip Code: </label><br> <input type="text"
					class="form-control" value="23456" readonly><br> <label
					for="city">City: </label><br> <input type="text"
					class="form-control" value="Sherman" readonly><br> <label
					for="state">State: </label><br> <input type="text"
					class="form-control" value="TX" readonly><br>
			</div>
		</div>
		<div class="col-lg-4">
			<div class="form-group">
				<label for="contact-name">Contact Name: </label><br> <input
					type="text" class="form-control" value="Johanna Smith" readonly><br>
				<label for="contact-phone">Contact Phone Number: </label><br> <input
					type="tel" class="form-control" id="contact-phone name="phone" pattern:"[0-9]{3} - [0-9]{2} - [0-9]{3}" value="234-546-7645" readonly><br>
				<label for="email">Contact Email: </label><br> <input
					type="email" id="contact-email" class="form-control"
					name="contact-email" value="email@example.com" readonly><br> <label
					for="description">Description of Event: </label><br>
				<textarea class="form-control" rows="4" id="description"></textarea>
			</div>
		</div>
	</div>
	</form>
</div>
	</div>


<div id="dlgEvSel" title="Select Event..." style="display:none">

	<div class="row" style="padding-left: 20px; padding-bottom: 20px">
		
		<div class="col">
			<!-- Events table -->
			<table id="tblEvents"
				class="table table-striped table-bordered table-sm" cellspacing="0"
				width="100%">
				<thead>
					<!-- these columns are not final. If anyone thinks different information would be better
				feel free to change these -->
					<tr>
						<th class="th-sm">&nbsp;</th>
						<th class="th-sm">Id</th>
						<th class="th-sm">Title</th>
						<th class="th-sm">Date</th>
					</tr>
				</thead>
				<tbody>
					<#list events as ev>
					<tr id="eid-${ev.eid?c}">
						<td class="ev_sel"><input class="boxSel" type="checkbox" eid="${ev.eid}" /></td>
						<td class="ev_id">${ev.eid!"UNKNOWN"}</td>
						<td class="ev_title">${ev.title!"UNKNOWN"}</td>
						<td class="ev_date">${ev.date?datetime}</td>
					</tr>
					</#list>
				</tbody>
			</table>
		</div>
	</div>
</div>

<script src="/srv/js/datatables.min.js"></script>
<link rel="stylesheet" href="/srv/css_style/datatables.min.css" />

</@layout.stdpage>

