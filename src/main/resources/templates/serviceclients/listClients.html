<#import "/main_layout.html" as layout />
<!-- CSS style for jquery widgets -->
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

<@layout.stdpage "Service Client Manager" "listStyle.css"
"serviceclients/listClients.js">

<!-- Holds the main elements of the page which include the service client table and its title
	     as well as the add buttons and dialogs. -->
<div id="mainContainer" class="container">
	<!-- The row below contains the table's title. -->
	<div class="row">
		<div class="col">
			<h1>Service Client List</h1>
		</div>
	</div>
	
	<#if userAdmin>
	<!-- The row below contains the button to add another organization to the table. -->
	<div class="row" style="padding-left: 30px; padding-bottom: 20px">
		<div id="addBtnContainer" class="col-sm-3 widget rounded">
			<span class="	fas fa-plus-circle"></span> <input
				class="addBtn ui-button ui-widget" type="submit"
				value="Add Service Client" />
		</div>
	</div>
	</#if>

	<!-- The row below contains the table of service clients. -->
	<div class="row">
		<div class="col">
			<div class="container ui-widget table-responsive">
				<table id="client_tbl"
					class="table ui-widget ui-widget-content table-striped table-bordered table-hover"
					width=100%>
					<!-- Using complex header in order to allow for datatables to sort the columns -->
					<thead>
						<tr class="ui-widget-header">
							<th rowspan="2">ID</th>
							<th rowspan="2">Name</th>
							<th rowspan="2">Primary Contact Name</th>
							<th rowspan="2">Board Member</th>
							<th rowspan="2">Category</th>
							<#if userAdmin>
							<th colspan='2'>Actions</th>
							</#if>	
						</tr>
						<tr>
							<#if userAdmin>
							<th>Edit</th>
							<th>Delete</th>
							<#else>
							<th>Action</th>
							</#if>
						</tr>
					</thead>
					<tbody id="sc_tbl_body">
						<#list clients as sc>
						<tr id="scid-${sc.scid?c}">
							<td name='sc_id' class='scRow' onRowClick="${sc.scid?c}">${sc.scid!"UNKNOWN"}</td>
							<td name='sc_title' class='scRow' onRowClick="${sc.scid?c}">${sc.name!"UNKNOWN"}</td>
							<td name='sc_contact_name' class='scRow'
								onRowClick="${sc.scid?c}">${sc.mainContact.firstName!"UNKNOWN"}
								${sc.mainContact.lastName!"UNKNOWN"}</td>
							<td name='sc_bm_name' class='scRow' onRowClick="${sc.scid?c}">${sc.currentBoardMember.contactInfo.firstName!"UNKNOWN"} ${sc.currentBoardMember.contactInfo.lastName!"UNKNOWN"}</td>
							<td name='sc_category' class='scRow' onRowClick="${sc.scid?c}">${sc.category!"UNKNOWN"}</td>
							<td class="text-center">
								<button type="button" class="edit btn"
									onEditClick="${sc.scid?c}">
									<span class="fas fa-pencil-alt"></span> Edit
								</button>
							</td>
							<#if userAdmin>
							<td class="text-center">
								<button type="button" class="del btn" onDelClick="${sc.scid?c}">
									<span class="fas fa-trash-alt"></span> Delete
								</button>
							</td>
							</#if>
						</tr>
						</#list>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	
	<#if userAdmin>
	<!-- The row below contains the button to add another service client to the table. -->
	<div class="row" style="padding-left: 30px">
		<div id="addBtnContainer" class="col-sm-3 widget rounded">
			<span class="	fas fa-plus-circle"></span> <input
				class="addBtn ui-button ui-corner-all ui-widget" type="submit"
				value="Add Service Client" />
		</div>
	</div>
	</#if>

	<!-- The div below defines the delete dialog for deleting an service client which is hidden by JS and exposed by JQ. -->
	<div id="delDlg" title="DELETE SELECTED ORGANIZATION"
		class="ui-widget delWid">
		<p id="del_confirm">
			<br> <br> <span id="delMsg1"></span> <br> <br> <span
				id="delMsg2"></span>
		</p>
	</div>

	<!-- The div below defines the add dialog for adding an service client which is hidden by JS and exposed by JQ. -->
	<!-- The user is free to add the service client's name, board member, and category. The contact information for the
		 service client is assuming that the contact is already in the contact database. Thus, the user can select the
		 desired contact ID which then pre-populates the contact information field from that contact but the user does
		 not have the ability to change it (such as contact name, phone, etc) -->
	<!--  Credit to be given to who ever made the viewHours HTML, I bases most of this off what your work did -->
	<div id="addDlg" title="New Service Client" class="ui-widget"
		style='overflow: auto'>
		<div class="container">
			<div class="row">
				<div class='form-group'>
					<div class="container-fluid">
						<p class="validationTips"></p>
						<div class='form-row' style='padding-bottom:15px'>
							<div class='col-sm-4'>
								<label for="addDlg_name"><b>Name of Service Client</b></label>
							</div>
							<div class='col-sm-6'>
								<input id="addDlg_name" class="form-control" size=50>
							</div>
						</div>
						<div class="form-row">
							<div class='col-sm-4'>
								<label for="addDlg_bmName"><b>Board Member</b></label>
							</div>
							<div class="form-group col-sm-6">
								<select id="addDlg_bmName" class='form-control'>
									<#list users as bm>
									<option value="${bm.uid}">${bm.contactInfo.firstName!"UNKNOWN"} ${bm.contactInfo.lastName!"UNKNOWN"}</option>
									</#list>
								</select>
							</div>
						</div>
						<div class="form-row">
							<div class='col-sm-4'>
								<label for="addDlg_cat"><b>Category</b></label>
							</div>
							<div class="form-group col-sm-6">
								 <select id="addDlg_cat" class="form-control">
									<option value="Animals">Animals</option>
									<option value="Community">Community</option>
									<option value="Education">Education</option>
									<option value="Seniors">Seniors</option>
									<option value="Medical">Medical</option>
									<option value="Crisis Support">Crisis Support</option>
									<option value="Variety">Variety</option>
								</select>
							</div>
						</div>
						<div class='row'>
							<div class='col'>
								<h5>
									<b>Primary Contact Information</b>
								</h5>
								<hr class=".col-md-11-auto">
							</div>
						</div>
						<div class='form-row'>
							<div class='col-sm-3'>
								<label for="addDlg_mcID"><b>Select Contact ID</b></label>
							</div>
							<div class='col-sm-2'>
								<select id="addDlg_mcID" class='form-control mcRow'>
									<#list contacts as con>
									<option>${con.contactId?c}</option>
									</#list>
								</select>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="addDlg_mcName"><b>Name</b></label> <input
									class="form-control" id="addDlg_mcName" readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="addDlg_mcEmail"><b>Email</b></label> <input
									class="form-control" id="addDlg_mcEmail" readonly>
							</div>
						</div>

						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="addDlg_mcWorkPhone"><b>Phone Number
										(Work)</b></label> <input class="form-control" id="addDlg_mcWorkPhone"
									readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="addDlg_mcMobilePhone"><b>Phone Number
										(Mobile)</b></label> <input class="form-control" id="addDlg_mcMobilePhone"
									readonly>
							</div>
						</div>
						<div class="form-group">
							<label for="addDlg_mcStreet"><b>Address</b></label> <input
								class="form-control" id="addDlg_mcStreet" readonly>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="addDlg_mcCity"><b>City</b></label> <input
									class="form-control" id="addDlg_mcCity" readonly>
							</div>
							<div class="form-group col-md-4">
								<label for="addDlg_mcState"><b>State</b></label> <input
									id="addDlg_mcState" class="form-control" readonly>
							</div>
							<div class="form-group col-md-2">
								<label for="addDlg_mcZip"><b>Zip</b></label> <input
									class="form-control" id="addDlg_mcZip" readonly>
							</div>
						</div>
						<div class='row'>
							<div class='col'>
								<h5>
									<b>Secondary Contact Information</b>
								</h5>
								<hr class=".col-md-11-auto">
							</div>
						</div>
						<div class='form-row'>
							<div class='col-sm-3'>
								<label for="addDlg_ocID"><b>Select Contact ID</b></label>
							</div>
							<div class='col-sm-2'>
								<select id="addDlg_ocID" class='form-control ocRow'>
									<#list contacts as con>
									<option>${con.contactId?c}</option>
									</#list>
								</select>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="addDlg_ocName"><b>Name</b></label> <input
									class="form-control" id="addDlg_ocName" readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="addDlg_ocEmail"><b>Email</b></label> <input
									class="form-control" id="addDlg_ocEmail" readonly>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="addDlg_ocWorkPhone"><b>Phone Number
										(Work)</b></label> <input class="form-control" id="addDlg_ocWorkPhone"
									readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="addDlg_ocMobilePhone"><b>Phone Number
										(Mobile)</b></label> <input class="form-control" id="addDlg_ocMobilePhone"
									readonly>
							</div>
						</div>
						<div class="form-group">
							<label for="addDlg_ocStreet"><b>Address</b></label> <input
								class="form-control" id="addDlg_ocStreet" readonly>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="addDlg_ocCity"><b>City</b></label> <input
									class="form-control" id="addDlg_ocCity" readonly>
							</div>
							<div class="form-group col-md-4">
								<label for="addDlg_ocState"><b>State</b></label> <input
									id="addDlg_ocState" class="form-control" readonly>
							</div>
							<div class="form-group col-md-2">
								<label for="addDlg_ocZip"><b>Zip</b></label> <input
									class="form-control" id="addDlg_ocZip" readonly>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- The div below defines the edit dialog for updating an existing service client which is hidden by JS and exposed by JQ. -->
	<!-- The user is free to update the service client's name, board member, and category along with the contact ID. The contact 
		 information for the service client is assuming that the contact is already in the contact database. Thus, the user can select the
		 desired contact ID which then pre-populates the contact information field from that contact but the user does
		 not have the ability to change it (such as contact name, phone, etc) -->
	<!--  Credit to be given to who ever made the viewHours HTML, I bases most of this off what your work did -->
	<div id="editDlg" title="Edit Service Client" class="ui-widget"
		style='overflow: auto'>
		<div class="container">
			<div class="row">
				<div class='form-group'>
					<div class="container-fluid">
						<p class="validationTips"></p>
						<div class='form-row' style='padding-bottom:15px'>
							<div class='col-sm-4'>
								<label for="editDlg_name"><b>Name of Service Client</b></label>
							</div>
							<div class='col-sm-6'>
								<#if userAdmin>
									<input id="editDlg_name" class="form-control" size=50>
								<#else>
									<input id="editDlg_name" class="form-control" size=50 readonly>
								</#if>
							</div>
						</div>
						<div class="form-row">
							<div class='col-sm-4'>
								<label for="editDlg_bmName"><b>Board Member</b></label>
							</div>
							<div class="form-group col-sm-6">
								<#if userAdmin>
								<select id="editDlg_bmNameAdmin" class='form-control'>
									<#list users as bm>
										<option value="${bm.uid}">${bm.contactInfo.firstName!"UNKNOWN"} ${bm.contactInfo.lastName!"UNKNOWN"}</option>
									</#list>
								</select>
								<#else>
									<input class="form-control" id="editDlg_bmName" readonly>
								 </#if>
							</div>
						</div>
						<div class="form-row">
							<div class='col-sm-4'>
								<label for="editDlg_cat"><b>Category</b></label>
							</div>
							<div class="form-group col-md-6">
								<#if userAdmin>
								<select	id="editDlg_cat" class="form-control">
									<option value="Animals">Animals</option>
									<option value="Community">Community</option>
									<option value="Education">Education</option>
									<option value="Seniors">Seniors</option>
									<option value="Medical">Medical</option>
									<option value="Crisis Support">Crisis Support</option>
									<option value="Variety">Variety</option>
								</select>
								<#else>
								 <input	class="form-control" id="editDlg_cat" readonly>
								</#if>
							</div>
						</div>
						<div class='row'>
							<div class='col'>
								<h5>
									<b>Primary Contact Information</b>
								</h5>
								<hr class=".col-md-11-auto">
							</div>
						</div>
						<div class='form-row'>
							<div class='col-sm-3'>
								<label for="editDlg_mcID"><b>Select Contact ID</b></label>
							</div>
							<div class='col-sm-2'>
								<select id="editDlg_mcID" class='form-control mcRow'>
									<#list contacts as con>
									<option>${con.contactId?c}</option>
									</#list>
								</select>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="editDlg_mcName"><b>Name</b></label> <input
									class="form-control" id="editDlg_mcName" readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="editDlg_mcEmail"><b>Email</b></label> <input
									class="form-control" id="editDlg_mcEmail" readonly>
							</div>
						</div>

						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="editDlg_mcWorkPhone"><b>Phone Number
										(Work)</b></label> <input class="form-control" id="editDlg_mcWorkPhone"
									readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="editDlg_mcMobilePhone"><b>Phone Number
										(Mobile)</b></label> <input class="form-control"
									id="editDlg_mcMobilePhone" readonly>
							</div>
						</div>
						<div class="form-group">
							<label for="editDlg_mcStreet"><b>Address</b></label> <input
								class="form-control" id="editDlg_mcStreet" readonly>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="editDlg_mcCity"><b>City</b></label> <input
									class="form-control" id="editDlg_mcCity" readonly>
							</div>
							<div class="form-group col-md-4">
								<label for="editDlg_mcState"><b>State</b></label> <input
									id="editDlg_mcState" class="form-control" readonly>
							</div>
							<div class="form-group col-md-2">
								<label for="editDlg_mcZip"><b>Zip</b></label> <input
									class="form-control" id="editDlg_mcZip" readonly>
							</div>
						</div>
						<div class='row'>
							<div class='col'>
								<h5>
									<b>Secondary Contact Information</b>
								</h5>
								<hr class=".col-md-11-auto">
							</div>
						</div>
						<div class='form-row'>
							<div class='col-sm-3'>
								<label for="editDlg_ocID"><b>Select Contact ID</b></label>
							</div>
							<div class='col-sm-2'>
								<select id="editDlg_ocID" class='form-control ocRow'>
									<#list contacts as con>
									<option>${con.contactId?c}</option>
									</#list>
								</select>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="editDlg_ocName"><b>Name</b></label> <input
									class="form-control" id="editDlg_ocName" readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="editDlg_ocEmail"><b>Email</b></label> <input
									class="form-control" id="editDlg_ocEmail" readonly>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="editDlg_ocWorkPhone"><b>Phone Number
										(Work)</b></label> <input class="form-control" id="editDlg_ocWorkPhone"
									readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="editDlg_ocMobilePhone"><b>Phone Number
										(Mobile)</b></label> <input class="form-control"
									id="editDlg_ocMobilePhone" readonly>
							</div>
						</div>
						<div class="form-group">
							<label for="editDlg_ocStreet"><b>Address</b></label> <input
								class="form-control" id="editDlg_ocStreet" readonly>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="editDlg_ocCity"><b>City</b></label> <input
									class="form-control" id="editDlg_ocCity" readonly>
							</div>
							<div class="form-group col-md-4">
								<label for="editDlg_ocState"><b>State</b></label> <input
									id="editDlg_ocState" class="form-control" readonly>
							</div>
							<div class="form-group col-md-2">
								<label for="editDlg_ocZip"><b>Zip</b></label> <input
									class="form-control" id="editDlg_ocZip" readonly>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!--  The div below shows a modal view of the service client information (contacts, names, etc) when the row was selected 
	      Does not allow for the user to edit any of the fields or provide any buttons to do so. -->
	<div id="scInfoDlg" title="Service Client Information"
		class="ui-widget">
		<div class="container">
			<div class="row">
				<div class='form-group'>
					<div class="container-fluid">
						<div class='form-row'>
							<div class='col-sm-4'>
								<label for="scInfoDlg_name"><b>Name of Service
										Client</b></label>
							</div>
							<div class='col-sm-6'>
								<input id="scInfoDlg_name" class="form-control" readonly size=50>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="scInfoDlg_bmName"><b>Board Member:</b></label> <input
									class="form-control" id="scInfoDlg_bmName" readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="scInfoDlg_cat"><b>Category</b></label> <input
									class="form-control" id="scInfoDlg_cat" readonly>
							</div>
						</div>
						<div class='row'>
							<div class='col'>
								<h5>
									<b>Primary Contact Information</b>
								</h5>
								<hr class=".col-md-11-auto">
							</div>
						</div>
						<div class='form-row'>
							<div class='col-sm-3'>
								<label for="scInfoDlg_mcID"><b>Select Contact ID</b></label>
							</div>
							<div class='col-sm-2'>
								<input id="scInfoDlg_mcID" class='form-control mcRow' readonly>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="scInfoDlg_mcName"><b>Name</b></label> <input
									class="form-control" id="scInfoDlg_mcName" readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="scInfoDlg_mcEmail"><b>Email</b></label> <input
									class="form-control" id="scInfoDlg_mcEmail" readonly>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="scInfoDlg_mcWorkPhone"><b>Phone Number
										(Work)</b></label> <input class="form-control" id="scInfoDlg_mcWorkPhone"
									readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="scInfoDlg_mcMobilePhone"><b>Phone Number
										(Mobile)</b></label> <input class="form-control"
									id="scInfoDlg_mcMobilePhone" readonly>
							</div>
						</div>
						<div class="form-group">
							<label for="scInfoDlg_mcStreet"><b>Address</b></label> <input
								class="form-control" id="scInfoDlg_mcStreet" readonly>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="scInfoDlg_mcCity"><b>City</b></label> <input
									class="form-control" id="scInfoDlg_mcCity" readonly>
							</div>
							<div class="form-group col-md-4">
								<label for="scInfoDlg_mcState"><b>State</b></label> <input
									id="scInfoDlg_mcState" class="form-control" readonly>
							</div>
							<div class="form-group col-md-2">
								<label for="scInfoDlg_mcZip"><b>Zip</b></label> <input
									class="form-control" id="scInfoDlg_mcZip" readonly>
							</div>
						</div>
						<div class='row'>
							<div class='col'>
								<h5>
									<b>Secondary Contact Information</b>
								</h5>
								<hr class=".col-md-11-auto">
							</div>
						</div>
						<div class='form-row'>
							<div class='col-sm-3'>
								<label for="scInfoDlg_ocID"><b>Select Contact ID</b></label>
							</div>
							<div class='col-sm-2' readonly>
								<input id="scInfoDlg_ocID" class='form-control mcRow' readonly>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="scInfoDlg_ocName"><b>Name</b></label> <input
									class="form-control" id="scInfoDlg_ocName" readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="scInfoDlg_ocEmail"><b>Email</b></label> <input
									class="form-control" id="scInfoDlg_ocEmail" readonly>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="scInfoDlg_ocWorkPhone"><b>Phone Number
										(Work)</b></label> <input class="form-control" id="scInfoDlg_ocWorkPhone"
									readonly>
							</div>
							<div class="form-group col-md-6">
								<label for="scInfoDlg_ocMobilePhone"><b>Phone Number
										(Mobile)</b></label> <input class="form-control"
									id="scInfoDlg_ocMobilePhone" readonly>
							</div>
						</div>
						<div class="form-group">
							<label for="scInfoDlg_ocStreet"><b>Address</b></label> <input
								class="form-control" id="scInfoDlg_ocStreet" readonly>
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="scInfoDlg_ocCity"><b>City</b></label> <input
									class="form-control" id="scInfoDlg_ocCity" readonly>
							</div>
							<div class="form-group col-md-4">
								<label for="scInfoDlg_ocState"><b>State</b></label> <input
									id="scInfoDlg_ocState" class="form-control" readonly>
							</div>
							<div class="form-group col-md-2">
								<label for="scInfoDlg_ocZip"><b>Zip</b></label> <input
									class="form-control" id="scInfoDlg_ocZip" readonly>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>





<!--  JavaScript file that will allow us to sort the table columns -->
<script src="/srv/js/datatables.min.js"></script>
<!-- JavaScript file that will allow us to use jquery widgets -->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


</@layout.stdpage>
